; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
src_dir = air

[env:d1_mini]
platform = espressif8266
board = d1_mini
;board = esp12e

framework = arduino

; Serial upload configuration (first time upload))
;upload_protocol = esptool
;upload_port = /dev/ttyUSB0     ; Replace with your actual serial port (check with 'ls /dev/tty*')
;upload_speed = 921600          ; Optional: upload speed (can be 115200, 460800, 921600)

; OTA upload configuration (after first time or when OTA is enabled)
upload_protocol = espota
upload_port = 192.168.0.211    ; air.local        ; Replace with your device's actual IP from OTAName in config.cpp
upload_flags = --auth=esp8266  ; Replace with your OTA password from OTAPassword varialble in config.cpp

; Filesystem upload configuration
board_build.filesystem = littlefs
; Alternative flash layouts (choose one):
; board_build.ldscript = eagle.flash.4m1m.ld  ; 4MB flash, 1MB filesystem
; board_build.ldscript = eagle.flash.4m2m.ld  ; 4MB flash, 2MB for filesystem

; allow using pin 9 and 10
board_build.flash_mode = dout

; Exclude data folder and library examples from compilation
;build_src_filter = 
;    +<*>
;    -<data/>
;    -<.pio/>

#add software serial library, oled display library, and adafruit sensor library
lib_deps =
  ESPSoftwareSerial @ ^8.2.0
  Adafruit SSD1306
  Adafruit GFX Library
  WifiManager
  ESP8266WiFi
  links2004/WebSockets
  ArduinoJson
  LittleFS
  knolleary/PubSubClient
  NTPClient
  adafruit/Adafruit Unified Sensor
  adafruit/Adafruit AHTX0        ; For AHT20 sensor
  adafruit/Adafruit BMP280 Library ; For BMP280 sensor
  adafruit/Adafruit BME280 Library ; For BME280 sensor

; For ESP-12F module uncomment the following section and comment out [env:d1_mini]
; [env:esp12e]
; platform = espressif8266
; board = esp12e
; framework = arduino
; upload_protocol = esptool
; upload_port = /dev/ttyUSB0
; upload_speed = 115200
; board_build.filesystem = littlefs
; lib_deps = ${env:d1_mini.lib_deps}
; Note: ESP-12F uses GPIO numbers directly (no D1-D8 pin labels)
; Default I2C pins will be: GPIO4 (SDA), GPIO5 (SCL)
; Default Serial pins will be: GPIO13 (RX), GPIO15 (TX)
; IMPORTANT: Add 4.7K pull-up resistors on SDA and SCL lines for I2C sensors!

; Erase the entire flash
; pio run -e d1_mini -t erase
; esptool.py --chip esp8266 --port /dev/ttyUSB0 erase_flash
; Or upload with erase
; pio run -e d1_mini -t upload --upload-port /dev/ttyUSB0
; Upload empty filesystem
; pio run -e d1_mini -t uploadfs

; esptool.py --chip esp8266 --port /dev/ttyUSB0 flash_id

; Build and upload filesystem
; pio run -e d1_mini -t uploadfs

; Or build filesystem only
; pio run -e d1_mini -t buildfs